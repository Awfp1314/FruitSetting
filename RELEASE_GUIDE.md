# 版本发布指南

## 快速发布

每次开发完成后，使用以下命令发布新版本：

```bash
npm run release
```

## 发布流程

### 1. 选择版本类型

```
请选择版本类型：
1. 大版本更新 (重大功能、不兼容改动)
2. 小版本更新 (新功能、向后兼容)
3. 问题修复 (Bug 修复、小改进)
```

**版本号规则：**

- 选择 1：`v2.2.0` → `v3.0.0` (大版本+1，小版本和修复号归零)
- 选择 2：`v2.2.0` → `v2.3.0` (小版本+1，修复号归零)
- 选择 3：`v2.2.0` → `v2.2.1` (修复号+1)

### 2. 输入更新信息

```
请输入更新标题: 记账系统增强

请输入更新内容（每行一条，输入空行结束）:
- ✨ 支持编辑和删除记账记录
- 🐛 修复移动端显示问题
- ⚡ 优化加载速度
- (输入空行结束)
```

### 3. 确认并发布

脚本会显示预览信息，确认后自动：

1. 更新 `src/constants/changelog.js`
2. 更新 `package.json`
3. 构建项目 (`npm run build`)
4. 提交到 Git
5. 推送到远程仓库
6. Vercel 自动部署

## 常用 Emoji 标记

在更新内容中使用这些 emoji 让信息更清晰：

- ✨ 新功能
- 🐛 Bug 修复
- 📦 功能模块
- 💰 业务相关
- 🎨 界面优化
- ⚡ 性能优化
- 🔄 重构
- 📱 移动端优化
- 🤖 AI 功能
- 📊 数据统计
- 🔒 安全相关
- 📝 文档更新

## 示例

### 示例 1：小版本更新

```bash
$ npm run release

当前版本: v2.2.0

请选择版本类型：
1. 大版本更新 (重大功能、不兼容改动)
2. 小版本更新 (新功能、向后兼容)
3. 问题修复 (Bug 修复、小改进)

请输入选项 (1/2/3): 2

新版本号: v2.3.0 (功能更新)

请输入更新标题: 添加数据导出功能

请输入更新内容（每行一条，输入空行结束）:
- ✨ 支持导出记账数据为 Excel
- ✨ 支持导出赶集日历为图片
- 🎨 优化导出界面
-

📋 发布信息预览：
版本: v2.3.0
类型: 功能更新
标题: 添加数据导出功能
更新内容:
  - ✨ 支持导出记账数据为 Excel
  - ✨ 支持导出赶集日历为图片
  - 🎨 优化导出界面

确认发布？(y/n): y

✅ 成功发布 v2.3.0！
🎉 Vercel 将自动部署新版本
```

### 示例 2：问题修复

```bash
$ npm run release

当前版本: v2.3.0

请输入选项 (1/2/3): 3

新版本号: v2.3.1 (问题修复)

请输入更新标题: 修复已知问题

请输入更新内容（每行一条，输入空行结束）:
- 🐛 修复删除记录后统计不更新的问题
- 🐛 修复日期选择器在 iOS 上的显示问题
-

确认发布？(y/n): y

✅ 成功发布 v2.3.1！
```

## 注意事项

1. **发布前确保代码已提交**：脚本会自动提交和推送
2. **更新内容要清晰**：用户会在更新弹窗中看到
3. **选择正确的版本类型**：影响版本号的变化
4. **测试后再发布**：确保功能正常

## Kiro 工作流程

作为 AI 助手，我的工作流程：

1. **开发功能** - 修改代码、添加功能
2. **提交代码** - `git add -A && git commit -m "..."`
3. **告诉你** - "代码已提交，请运行 `npm run release` 发布新版本"
4. **你运行发布脚本** - 选择版本类型、填写更新内容
5. **自动发布** - 脚本自动完成剩余工作

这样既保证了版本管理的规范性，又给了你对版本发布的完全控制！
